<% layout("/layouts/boilerplate") %>
<style>
 /* Make all columns the same height row-wise */
.result-col {
  display: flex;
}

/* Card fills the column height */
.result-card {
  border: none !important;
  box-shadow: none !important;
  background: none;
  display: flex;
  flex-direction: column;
  height: 100%;
}

/* Image with fixed ratio but responsive */
.result-img {
  width: 100%;
  aspect-ratio: 4 / 3;   /* or 16 / 9 */
  object-fit: cover;
}

/* Card body fills remaining space and pushes button to bottom */
.card-body {
  display: flex;
  flex-direction: column;
}

/* Button container at bottom */
.view-btn-div {
  background-color:#fe424d;
  border-radius: 25px;
  padding: 0 1rem;

  margin: 0.7rem;
  align-self: flex-start;
}

.view-btn {
  color:#ffffff;
  display:flex;
  align-items:center;
  justify-content:center;
}

@media (max-width: 576px) {
  .search-form {
    width: 100%;
    max-width: 100%;
  }

  .search-input {
    flex: 1;
    max-width: none;
    width: 65%;
    padding: 0.4rem 0.8rem;
    font-size: 0.9rem;
  }

  .search-btn {
    width: 35%;
    padding: 0.4rem 0.5rem;
    font-size: 0.9rem;
    margin-left: 0.4rem;
    text-align: center;
  }

  .search-btn i{
    margin-right:0.3rem;
  }
}

</style>

<h3>Search Results for "<%= query %>"</h3>
<div class="row listing-card">
  <% listings.forEach(listing => { %>
    <div class="col-12 col-sm-6 col-md-4 mb-3 result-col">
      <div class="card result-card h-100">
        <img src="<%= listing.image.url %>" class="card-img-top result-img">
        <div class="card-body d-flex flex-column">
          <h5 class="title"><%= listing.title %></h5>
          <p class="location"><%= listing.location %></p>
          <div class="mt-auto view-btn-div">
            <a href="/listings/<%= listing._id %>" class="btn view-btn">View</a>
          </div>
        </div>
      </div>
    </div>
  <% }) %>
</div>
